<h1>Registration Numbers from Western Cape</h1>
{{!-- this is going to be an info box --}}
<p class="info">Enter a registration from Cape Town(CA), Paarl(CJ), Stellenbosch(CL), Malmesbury(CK), Kraaifontein(CF)
</p>


{{#if errorMessage}}
<p class="red">{{errorMessage}}</p>

{{/if}}


<script>
    setTimeout(function () {
        document.querySelector(".red").style.display = "none";
    }, 4000)
</script>



{{#if reset}}<p class="green">{{reset}}</p>{{/if}}

<script>
    setTimeout(function () {
        document.querySelector(".green").style.display = "none";
    }, 4000)
</script>





<div class="container">
    <form action="/registrations" method="POST">



        <p>Registration Number : <input type="text" class="textArea" id='reg_id' name="car_registration"
                placeholder="Enter registration number">
        </p>
        <p class="invalidMsg"></p>
        <div class="buttons">
            <button class="addRegNoBtn" type="submit">ADD</button>



            <button type="submit" formaction="/clear"
                onclick="return confirm('Are you sure you want to reset your data?')">CLEAR</button>
        </div>


    </form>

</div>


<br>

<form id="townFilterForm" action="/filter" method="POST">
    <div class="boxRegNo">
        <div>
            <label for="regNums">Choose a town:</label>
            <select name="town" class="town" onchange="redirectToSelectedTown(this);">
                <option value="" disabled selected>Select your option </option>
                <option value="/">All towns</option>
                <option value="1">Cape Town (CA)</option>
                <option value="2">Paarl (CJ)</option>
                <option value="3">Malmesbury (CK)</option>
                <option value="4">Stellenbosch(CL)</option>
                <option value="5">Kraaifontein(CF)</option>
            </select>

        </div>
    </div>
</form>

<script>
    function redirectToSelectedTown(selectElement) {
        const selectedValue = selectElement.value;

        // Check if the selected value is not empty
        if (selectedValue) {
            // Submit the form when a town is selected
            document.getElementById('townFilterForm').submit();
        }
        if (selectedValue === "/") {

            window.location.href = selectedValue;
        }
    }
</script>




<div class="font">


    {{#each regNum}}
    <p class="regNum">{{this.number}}</p>
    {{/each}}

</div>
<br>
{{#if filterError}}
<div class="filterError">
    {{filterError}}
</div>
{{/if}}

<script>
    setTimeout(function () {
        document.querySelector(".filterError").style.display = "none";
    }, 4000)
</script>